(window.webpackJsonpminiapp=window.webpackJsonpminiapp||[]).push([[0],{189:function(e,t,a){e.exports=a(297)},275:function(e,t,a){},276:function(e,t,a){},277:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);a(190),a(216),a(218),a(219),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(230),a(231),a(232),a(233),a(234),a(235),a(236),a(237),a(238),a(239),a(241),a(242),a(243),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254),a(255),a(256),a(257),a(258);var n=a(0),r=a.n(n),s=a(43),c=a.n(s),i=(a(266),a(267),a(5)),o=(a(275),a(276),a(277),a(24)),l=a(35),u=a(4),p=a.n(u),h=a(9),m=a(97),d=a(98),f=a(100),v=a(99),b=a(34),g=a(101),y=a(302),w=a(303),E=a(304),k=a(305),_=a(11),x=a.n(_);function O(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";this.back=Object(h.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.state.popout||void 0===e.state.popout){t.next=4;break}return e.setState({popout:null}),window.history.pushState({pop:"popout"},"Title"),t.abrupt("return");case 4:if(1!==(a=e.state.history).length){t.next=9;break}x.a.send("VKWebAppClose",{status:"success"}),t.next=13;break;case 9:if(!(a.length>1)){t.next=13;break}return a.pop(),t.next=13,e.setState({activePanel:a[a.length-1],history:a,snackbar:null});case 13:case"end":return t.stop()}}),t)}))),this.go=function(t){var a=e.state.history;"object"===typeof t&&t.currentTarget&&(t=t.currentTarget.dataset.to),a[a.length-1]!==t&&(a.push(t),window.history.pushState({activePanel:t},"Title"),e.setState({activePanel:t,history:a,snackbar:null}))},this.setActiveModal=function(t){e.setState({activeModal:t})},this.setActivePanel=function(t,a){e.setState({activePanel:t,history:a?[].concat(Object(o.a)(a),[t]):[t]})},this.setPopout=function(t){e.setState({popout:t})},this.setAlert=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[{title:"\u041e\u043a",autoclose:!0}];e.setPopout(r.a.createElement(i.b,{actions:n,actionsLayout:"vertical",onClose:function(){return e.setPopout(null)},header:t,text:a}))},this.state.history=[t],this.state.activePanel=t}function j(){return{activePanel:this.state.activePanel,onSwipeBack:this.back,history:this.state.history,popout:this.state.popout}}a(42),a(58);function P(e){return new Promise((function(t){return setTimeout(t,e)}))}function S(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e){var n=[];return n[e]||(n[e]=e%100>4&&e%100<20?2:[2,0,1,1,1,2][Math.min(e%10,5)]),(a?e+" ":"")+t[n[e]]}}function A(e){try{return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}catch(t){return 0}}function I(){var e=window.location.search.length>0&&JSON.parse('{"'+decodeURI(window.location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');return e&&e.vk_chat_id&&(e.vk_chat_id=decodeURIComponent(e.vk_chat_id)),e}a(59);function C(e){return z.apply(this,arguments)}function z(){return(z=Object(h.a)(p.a.mark((function e(t){var a,n,r=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.prev=1,e.next=4,x.a.send("VKWebAppGetAuthToken",{app_id:parseInt(I().vk_app_id),scope:t});case 4:if((n=e.sent).scope.split(",").length!==t.split(",").length){e.next=9;break}return e.abrupt("return",n.access_token);case 9:return e.abrupt("return",C(t,a));case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;x.a.subscribe(function(){var a=Object(h.a)(p.a.mark((function a(n){var r,s,c,i,o;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=n.detail,s=r.type,c=r.data,void 0!==s&&console.debug(s,c),"VKWebAppUpdateConfig"===s?(i=document.createAttribute("scheme"),o=c.scheme?"client_light"===c.scheme?"bright_light":c.scheme:"bright_light",i.value=t||o,document.body.attributes.setNamedItem(i),e[s]&&"function"===typeof e[s]&&e[s]()):e[s]&&"function"===typeof e[s]&&e[s]();case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={wall_posts_count:0,wall_posts_keys:[],wall_posts:{},wall_posts_2:[],multiplier:20},O.bind(Object(b.a)(a))(),a.api=a.api.bind(Object(b.a)(a)),a.setAlert=a.setAlert.bind(Object(b.a)(a)),a.analyze=a.analyze.bind(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(),x.a.send("VKWebAppInit"),this.setPopout(r.a.createElement(i.r,null)),e.next=5,C("",!0);case 5:t=e.sent,this.setState({user_token:t}),this.setPopout(null);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"api",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n,r,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},e.prev=1,n=this.state.user_token,e.next=5,x.a.send("VKWebAppCallAPIMethod",{method:t,params:D({},a,{v:"5.126",access_token:n})});case 5:if(!(r=e.sent).response){e.next=10;break}return e.abrupt("return",r.response);case 10:return this.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430 0",JSON.stringify(r),[{title:"\u041e\u043a",autoclose:!0}]),e.abrupt("return",!1);case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(1),console.error(e.t0),this.setAlert("\u041e\u0448\u0438\u0431\u043a\u0430 1",e.t0.error_data?e.t0.error_data.error_reason.error_msg:e.t0.message,[{title:"\u041e\u043a",autoclose:!0}]),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setAlert",value:function(e,t,a){var n=this;this.setPopout(r.a.createElement(i.b,{actions:a,actionsLayout:"vertical",onClose:function(){return n.setPopout(null)},header:e,text:t}))}},{key:"analyze",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,n,s,c,l,u,h,m,d,f,v,b,g,y,w,E,k,_=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.setPopout(r.a.createElement(i.r,null)),t=this.state,a=t.wall_posts,n=t.wall_posts_2,s=t.multiplier,c=n.map((function(e){return e.trim()}))||Object.keys(a).map((function(e){return a[e]})),l={},u=!0,h=!1,m=void 0,e.prev=7,d=c[Symbol.iterator]();!(u=(f=d.next()).done);u=!0)(v=(v=f.value).substring(v.indexOf("wall-")+"wall".length)).indexOf("?")>-1&&(v=v.substring(0,v.indexOf("?"))),v=v.split("_"),l[v[0]]=[].concat(Object(o.a)(l[v[0]]||[]),[v[1]]);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),h=!0,m=e.t0;case 15:e.prev=15,e.prev=16,u||null==d.return||d.return();case 18:if(e.prev=18,!h){e.next=21;break}throw m;case 21:return e.finish(18);case 22:return e.finish(15);case 23:b={},g={},y=!0,w=p.a.mark((function e(){var t,a,n,r,c,i,u,h,m,d,f,v,w;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k[E],e.next=3,_.api("stats.getPostReach",{owner_id:t,post_ids:l[t].join(",")});case 3:return a=e.sent,e.next=6,_.api("wall.getById",{posts:l[t].map((function(e){return"".concat(t,"_").concat(e)})).join(","),fields:"name",extended:1});case 6:if(n=e.sent,a&&n){e.next=10;break}return y=!1,e.abrupt("return","break");case 10:for(r=0;r<Math.min(a.length,n.items.length);r++){for(c={likes:0,reposts:0,comments:0},i=a[r],u=n.items[r],c.name=n.groups[0].name,c.photo=n.groups[0].photo_100,c.price=Math.floor(i.reach_total/1e3*s),h=0,m=["likes","reposts","comments"];h<m.length;h++)c[d=m[h]]=u[d].count,g[d]=(g[d]||0)+u[d].count;for(f=0,v=[].concat(Object(o.a)(Object.keys(i)),["price"]);f<v.length;f++)w=v[f],g[w]=(g[w]||0)+(i[w]||c[w]);b[t]=[].concat(Object(o.a)(b[t]||[]),[D({},i,{},c)])}return e.next=13,P(500);case 13:case"end":return e.stop()}}),e)})),E=0,k=Object.keys(l);case 28:if(!(E<k.length)){e.next=36;break}return e.delegateYield(w(),"t1",30);case 30:if("break"!==e.t1){e.next=33;break}return e.abrupt("break",36);case 33:E++,e.next=28;break;case 36:if(!y){e.next=41;break}return this.setState({stats:{output:b,general:g}}),e.next=40,this.go("stats");case 40:this.setPopout(null);case 41:case"end":return e.stop()}}),e,this,[[7,11,15,23],[16,,18,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"statsComponent",value:function(e,t){var a=e.reach_total,n=e.reach_subscribers,s=e.reach_viral,c=e.likes,o=e.reposts,l=e.comments,u=e.to_group,p=e.join_group,h=e.links,m=e.hide,d=e.report,f=e.unsubscribe,v=e.price;e.name;return r.a.createElement(i.h,{style:{margin:"0px 12px 12px",paddingTop:0}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{style:{width:"50%"}},r.a.createElement(i.l,{level:"2",weight:"2"},t?r.a.createElement(r.a.Fragment,null,"\u041e\u0445\u0432\u0430\u0442 ",r.a.createElement(i.n,{target:"_blank",href:"https://vk.com/wall".concat(t)},t)):"\u041e\u0445\u0432\u0430\u0442",r.a.createElement("br",null)," \u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",v),r.a.createElement(i.s,{size:6}),r.a.createElement("div",{style:{display:"flex",gap:6,alignItems:"center"}},r.a.createElement(y.a,{fill:"var(--icon_outline_secondary)"}),r.a.createElement(i.v,{level:"1"},A(a))),r.a.createElement(i.s,{size:6}),r.a.createElement("div",{style:{display:"flex",gap:6,alignItems:"center"}},r.a.createElement(i.t,{weight:"1"},A(n)),r.a.createElement(i.t,{weight:"3"},"/"),r.a.createElement(i.t,{weight:"1"},A(s))),r.a.createElement(i.s,{size:4}),r.a.createElement("div",{style:{display:"flex",gap:6,alignItems:"center",color:"var(--text_secondary)"}},r.a.createElement(i.t,{weight:"1"},"\u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432"),r.a.createElement(i.t,{weight:"3"},"/"),r.a.createElement(i.t,{weight:"1"},"\u0432\u0438\u0440\u0430\u043b\u044c\u043d\u044b\u0445"))),r.a.createElement("div",{style:{width:"50%"}},r.a.createElement(i.l,{level:"2",weight:"2"},"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0441\u0432\u044f\u0437\u044c"),r.a.createElement(i.s,{size:6}),r.a.createElement("div",{style:{display:"flex",gap:12,alignItems:"center"}},[[r.a.createElement(w.a,{fill:"var(--icon_outline_secondary)"}),c],[r.a.createElement(E.a,{fill:"var(--icon_outline_secondary)"}),o],[r.a.createElement(k.a,{fill:"var(--icon_outline_secondary)"}),l]].map((function(e,t){return r.a.createElement("div",{key:"e-".concat(t),style:{display:"flex",gap:6,alignItems:"center"}},e[0],r.a.createElement(i.v,{level:"1"},A(e[1])))}))),r.a.createElement(i.s,{size:6}),r.a.createElement(i.t,{weight:"1",style:{color:"var(--text_secondary)"}},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0440\u0435\u0430\u043a\u0446\u0438\u0439, \u0440\u0435\u043f\u043e\u0441\u0442\u043e\u0432 \u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432."))),r.a.createElement(i.s,{size:12}),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{style:{width:"50%"}},[[u,S(u,["\u043f\u0435\u0440\u0435\u0445\u043e\u0434","\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430","\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432"],!1)+" \u0432 \u0433\u0440\u0443\u043f\u043f\u0443"],[p,S(p,["\u0432\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435","\u0432\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f","\u0432\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0439"],!1)+" \u0432 \u0433\u0440\u0443\u043f\u043f\u0443"],[h,S(h,["\u043f\u0435\u0440\u0435\u0445\u043e\u0434","\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430","\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432"],!1)+" \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435"]].map((function(e,t){return r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:4},key:"e1-".concat(t)},r.a.createElement(i.t,{weight:"1"},e[0]),r.a.createElement(i.t,{weight:"3"},e[1]))}))),r.a.createElement("div",{style:{width:"50%"}},[[m,S(m,["\u0441\u043a\u0440\u044b\u0442\u0438\u0435","\u0441\u043a\u0440\u044b\u0442\u0438\u044f","\u0441\u043a\u0440\u044b\u0442\u0438\u0439"],!1)],[d,S(d,["\u0436\u0430\u043b\u043e\u0431\u0430","\u0436\u0430\u043b\u043e\u0431\u044b","\u0436\u0430\u043b\u043e\u0431"],!1)],[f,S(f,["\u0441\u043a\u0440\u044b\u0442\u0438\u0435","\u0441\u043a\u0440\u044b\u0442\u0438\u044f","\u0441\u043a\u0440\u044b\u0442\u0438\u0439"],!1)+" \u0432\u0441\u0435\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439"]].map((function(e,t){return r.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:4},key:"e1-".concat(t)},r.a.createElement(i.t,{weight:"1"},e[0]),r.a.createElement(i.t,{weight:"3"},e[1]))})))))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.wall_posts_count,t.wall_posts_keys,t.wall_posts,t.wall_posts_2),n=t.stats,s=t.multiplier;return r.a.createElement(i.w,j.bind(this)(),r.a.createElement(i.o,{id:"main"},r.a.createElement(i.p,null,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),r.a.createElement(i.j,null,r.a.createElement(i.i,{top:"\u0421\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u0438"},r.a.createElement(i.u,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0438, \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u044f \u0438\u0445 \u0441 \u043d\u043e\u0432\u043e\u0439 \u0441\u0442\u0440\u043e\u0447\u043a\u0438",onChange:function(t){e.setState({wall_posts_2:t.currentTarget.value.split("\n")})}})),r.a.createElement(i.i,{top:"\u041c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438"},r.a.createElement(i.m,{type:"number",onChange:function(t){return e.setState({multiplier:t.currentTarget.value})},value:s}))),r.a.createElement(i.h,null,r.a.createElement(i.e,{disabled:0===a.length,size:"m",stretched:!0,onClick:this.analyze},"\u041d\u0430\u0447\u0430\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437"))),r.a.createElement(i.o,{id:"stats"},r.a.createElement(i.p,{left:r.a.createElement(i.q,{onClick:this.back})},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"),r.a.createElement(i.j,null,r.a.createElement(i.k,{mode:"secondary"},r.a.createElement("span",{style:{fontSize:15}},"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")),n&&this.statsComponent(n.general)),n&&Object.keys(n.output).map((function(t,a){return r.a.createElement(i.j,{key:"stat-".concat(a)},r.a.createElement(i.k,{mode:"secondary"},r.a.createElement("span",{style:{display:"flex",alignItems:"center",gap:8,fontSize:15}},r.a.createElement(i.d,{size:28,src:n.output[t][0].photo}),"\u0417\u0430\u043f\u0438\u0441\u0438 ",r.a.createElement(i.n,{target:"_blank",href:"https://vk.com/club".concat(-t)},n.output[t][0].name))),n.output[t].map((function(a,n){return e.statsComponent(a,"".concat(t,"_").concat(a.post_id))})))}))))}}]),t}(r.a.Component);c.a.render(r.a.createElement(i.f,{webviewType:i.x.INTERNAL},r.a.createElement(i.a,null,r.a.createElement(i.c,null,r.a.createElement(K,null)))),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.5d2cc76f.chunk.js.map